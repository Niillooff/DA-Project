<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>niloufar-shokri</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Niloufar Shokri_files/libs/clipboard/clipboard.min.js"></script>
<script src="Niloufar Shokri_files/libs/quarto-html/quarto.js"></script>
<script src="Niloufar Shokri_files/libs/quarto-html/popper.min.js"></script>
<script src="Niloufar Shokri_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Niloufar Shokri_files/libs/quarto-html/anchor.min.js"></script>
<link href="Niloufar Shokri_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Niloufar Shokri_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Niloufar Shokri_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Niloufar Shokri_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Niloufar Shokri_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importing main libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reading our dataframe</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>rawdf <span class="op">=</span> pd.read_csv(<span class="st">'exam_data.csv'</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>rawdf.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Unnamed: 0</th>
      <th>VendorID</th>
      <th>tpep_pickup_datetime</th>
      <th>tpep_dropoff_datetime</th>
      <th>passenger_count</th>
      <th>trip_distance</th>
      <th>pickup_longitude</th>
      <th>pickup_latitude</th>
      <th>RatecodeID</th>
      <th>store_and_fwd_flag</th>
      <th>...</th>
      <th>fare_amount</th>
      <th>extra</th>
      <th>mta_tax</th>
      <th>tip_amount</th>
      <th>tolls_amount</th>
      <th>improvement_surcharge</th>
      <th>total_amount</th>
      <th>GoodTip</th>
      <th>Extra</th>
      <th>Cash</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>2016-02-19 20:50:15</td>
      <td>2016-02-19 21:10:20</td>
      <td>1</td>
      <td>11.20</td>
      <td>-73.864700</td>
      <td>40.770416</td>
      <td>1</td>
      <td>N</td>
      <td>...</td>
      <td>32.5</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>9.80</td>
      <td>5.54</td>
      <td>0.3</td>
      <td>49.14</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>2</td>
      <td>2016-02-19 20:50:53</td>
      <td>2016-02-19 21:09:33</td>
      <td>3</td>
      <td>6.38</td>
      <td>-74.007317</td>
      <td>40.727219</td>
      <td>1</td>
      <td>N</td>
      <td>...</td>
      <td>21.5</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>4.56</td>
      <td>0.00</td>
      <td>0.3</td>
      <td>27.36</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>2016-02-19 20:51:08</td>
      <td>2016-02-19 20:54:39</td>
      <td>1</td>
      <td>0.60</td>
      <td>-73.980736</td>
      <td>40.765663</td>
      <td>1</td>
      <td>N</td>
      <td>...</td>
      <td>4.5</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>1.15</td>
      <td>0.00</td>
      <td>0.3</td>
      <td>6.95</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>2</td>
      <td>2016-02-19 20:51:39</td>
      <td>2016-02-19 21:04:08</td>
      <td>5</td>
      <td>2.83</td>
      <td>-73.980087</td>
      <td>40.764450</td>
      <td>1</td>
      <td>N</td>
      <td>...</td>
      <td>12.0</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>2.66</td>
      <td>0.00</td>
      <td>0.3</td>
      <td>15.96</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>2</td>
      <td>2016-02-19 20:52:21</td>
      <td>2016-02-19 21:01:07</td>
      <td>1</td>
      <td>2.48</td>
      <td>-73.986664</td>
      <td>40.766796</td>
      <td>1</td>
      <td>N</td>
      <td>...</td>
      <td>9.5</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>2.16</td>
      <td>0.00</td>
      <td>0.3</td>
      <td>12.96</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 23 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>rawdf.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>(28454, 23)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># getting data on dataset</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>rawdf.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 28454 entries, 0 to 28453
Data columns (total 23 columns):
 #   Column                 Non-Null Count  Dtype  
---  ------                 --------------  -----  
 0   Unnamed: 0             28454 non-null  int64  
 1   VendorID               28454 non-null  int64  
 2   tpep_pickup_datetime   28454 non-null  object 
 3   tpep_dropoff_datetime  28454 non-null  object 
 4   passenger_count        28454 non-null  int64  
 5   trip_distance          28454 non-null  float64
 6   pickup_longitude       28454 non-null  float64
 7   pickup_latitude        28454 non-null  float64
 8   RatecodeID             28454 non-null  int64  
 9   store_and_fwd_flag     28454 non-null  object 
 10  dropoff_longitude      28454 non-null  float64
 11  dropoff_latitude       28454 non-null  float64
 12  payment_type           28454 non-null  int64  
 13  fare_amount            28454 non-null  float64
 14  extra                  28454 non-null  float64
 15  mta_tax                28454 non-null  float64
 16  tip_amount             28454 non-null  float64
 17  tolls_amount           28454 non-null  float64
 18  improvement_surcharge  28454 non-null  float64
 19  total_amount           28454 non-null  float64
 20  GoodTip                28454 non-null  bool   
 21  Extra                  28454 non-null  bool   
 22  Cash                   28454 non-null  bool   
dtypes: bool(3), float64(12), int64(5), object(3)
memory usage: 4.4+ MB</code></pre>
</div>
</div>
<section id="data-preprocessing" class="level2">
<h2 class="anchored" data-anchor-id="data-preprocessing">Data Preprocessing</h2>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># counting the missing value</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(rawdf.isnull().<span class="bu">sum</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Unnamed: 0               0
VendorID                 0
tpep_pickup_datetime     0
tpep_dropoff_datetime    0
passenger_count          0
trip_distance            0
pickup_longitude         0
pickup_latitude          0
RatecodeID               0
store_and_fwd_flag       0
dropoff_longitude        0
dropoff_latitude         0
payment_type             0
fare_amount              0
extra                    0
mta_tax                  0
tip_amount               0
tolls_amount             0
improvement_surcharge    0
total_amount             0
GoodTip                  0
Extra                    0
Cash                     0
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># counting the missing value in case the data set is very big</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>num_missing_values <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> column <span class="kw">in</span> rawdf.columns:</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> item <span class="kw">in</span> rawdf[column].isnull():</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> item <span class="op">==</span> <span class="va">True</span>:</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>      num_missing_values <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>num_missing_values</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>rawdf.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Unnamed: 0</th>
      <th>VendorID</th>
      <th>passenger_count</th>
      <th>trip_distance</th>
      <th>pickup_longitude</th>
      <th>pickup_latitude</th>
      <th>RatecodeID</th>
      <th>dropoff_longitude</th>
      <th>dropoff_latitude</th>
      <th>payment_type</th>
      <th>fare_amount</th>
      <th>extra</th>
      <th>mta_tax</th>
      <th>tip_amount</th>
      <th>tolls_amount</th>
      <th>improvement_surcharge</th>
      <th>total_amount</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
      <td>28454.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>14227.500000</td>
      <td>1.533704</td>
      <td>1.655268</td>
      <td>2.855989</td>
      <td>-72.733989</td>
      <td>40.067928</td>
      <td>1.034512</td>
      <td>-72.819656</td>
      <td>40.116220</td>
      <td>1.332080</td>
      <td>12.374901</td>
      <td>0.330059</td>
      <td>0.497821</td>
      <td>1.775045</td>
      <td>0.295736</td>
      <td>0.299758</td>
      <td>15.573319</td>
    </tr>
    <tr>
      <th>std</th>
      <td>8214.106616</td>
      <td>0.498872</td>
      <td>1.309776</td>
      <td>3.501624</td>
      <td>9.497449</td>
      <td>5.232016</td>
      <td>0.269993</td>
      <td>9.168417</td>
      <td>5.050929</td>
      <td>0.487757</td>
      <td>10.543776</td>
      <td>0.435706</td>
      <td>0.035503</td>
      <td>2.543415</td>
      <td>1.372249</td>
      <td>0.011660</td>
      <td>13.049244</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-74.226357</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>-74.358086</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>-60.000000</td>
      <td>-1.000000</td>
      <td>-0.500000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-0.300000</td>
      <td>-60.800000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>7114.250000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>-73.991676</td>
      <td>40.736094</td>
      <td>1.000000</td>
      <td>-73.991234</td>
      <td>40.734661</td>
      <td>1.000000</td>
      <td>6.500000</td>
      <td>0.000000</td>
      <td>0.500000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.300000</td>
      <td>8.300000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>14227.500000</td>
      <td>2.000000</td>
      <td>1.000000</td>
      <td>1.670000</td>
      <td>-73.981522</td>
      <td>40.753237</td>
      <td>1.000000</td>
      <td>-73.979660</td>
      <td>40.753910</td>
      <td>1.000000</td>
      <td>9.000000</td>
      <td>0.000000</td>
      <td>0.500000</td>
      <td>1.350000</td>
      <td>0.000000</td>
      <td>0.300000</td>
      <td>11.750000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>21340.750000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>3.100000</td>
      <td>-73.966721</td>
      <td>40.767547</td>
      <td>1.000000</td>
      <td>-73.962364</td>
      <td>40.769230</td>
      <td>2.000000</td>
      <td>14.000000</td>
      <td>0.500000</td>
      <td>0.500000</td>
      <td>2.360000</td>
      <td>0.000000</td>
      <td>0.300000</td>
      <td>17.250000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>28454.000000</td>
      <td>2.000000</td>
      <td>6.000000</td>
      <td>37.900000</td>
      <td>0.000000</td>
      <td>40.905941</td>
      <td>5.000000</td>
      <td>0.000000</td>
      <td>41.097080</td>
      <td>4.000000</td>
      <td>300.000000</td>
      <td>4.500000</td>
      <td>0.500000</td>
      <td>92.000000</td>
      <td>25.000000</td>
      <td>0.300000</td>
      <td>376.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<section id="negative-values" class="level3">
<h3 class="anchored" data-anchor-id="negative-values">Negative Values</h3>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the negative values of fare_amount</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>rawdf[rawdf[<span class="st">'fare_amount'</span>]<span class="op">&lt;</span><span class="dv">0</span>][<span class="st">'fare_amount'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>-3.5     3
-4.5     2
-3.0     2
-2.5     2
-60.0    1
Name: fare_amount, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the negative values of extra</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>rawdf[<span class="st">'extra'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code> 0.0    14753
 0.5     9242
 1.0     4367
 4.5       90
-0.5        1
-1.0        1
Name: extra, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the negative values of extra</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>rawdf[<span class="st">'mta_tax'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code> 0.5    28340
 0.0      104
-0.5       10
Name: mta_tax, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the negative values of improvement_surcharge</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>rawdf[<span class="st">'improvement_surcharge'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code> 0.3    28441
-0.3       10
 0.0        3
Name: improvement_surcharge, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the negative values of fare_amount</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>rawdf[rawdf[<span class="st">'total_amount'</span>]<span class="op">&lt;</span><span class="dv">0</span>][<span class="st">'fare_amount'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>-3.5     3
-4.5     2
-3.0     2
-2.5     2
-60.0    1
Name: fare_amount, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="zero-values" class="level3">
<h3 class="anchored" data-anchor-id="zero-values">Zero Values</h3>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the 0 values of passenger_count</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>rawdf[rawdf[<span class="st">'passenger_count'</span>]<span class="op">==</span><span class="dv">0</span>][<span class="st">'passenger_count'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>0    1
Name: passenger_count, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the 0 values of trip_distance</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>rawdf[rawdf[<span class="st">'trip_distance'</span>]<span class="op">==</span><span class="dv">0</span>][<span class="st">'trip_distance'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>0.0    156
Name: trip_distance, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the 0 values of fare_amount</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>rawdf[rawdf[<span class="st">'fare_amount'</span>]<span class="op">==</span><span class="dv">0</span>][<span class="st">'fare_amount'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>0.0    6
Name: fare_amount, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># scatter plot of pickup_longitude and pickup_latitude</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">3</span>,<span class="dv">3</span>))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>sns.scatterplot( x<span class="op">=</span>rawdf[<span class="st">'pickup_longitude'</span>], y<span class="op">=</span>rawdf[<span class="st">'pickup_latitude'</span>])</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Pick-up Location'</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-17-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the 0 values of pickup_longitude</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>rawdf[rawdf[<span class="st">'pickup_latitude'</span>]<span class="op">==</span><span class="dv">0</span>][<span class="st">'pickup_longitude'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>0.0    477
Name: pickup_longitude, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the 0 values of pickup_latitude</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>rawdf[rawdf[<span class="st">'pickup_longitude'</span>]<span class="op">==</span><span class="dv">0</span>][<span class="st">'pickup_latitude'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>0.0    477
Name: pickup_latitude, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># scatter plot of dropoff_longitude and dropoff_latitude</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">3</span>,<span class="dv">3</span>))</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>sns.scatterplot( x<span class="op">=</span>rawdf[<span class="st">'dropoff_longitude'</span>], y<span class="op">=</span>rawdf[<span class="st">'dropoff_latitude'</span>])</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Dropoff Location'</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-20-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the 0 values of dropoff_latitude</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>rawdf[rawdf[<span class="st">'dropoff_longitude'</span>]<span class="op">==</span><span class="dv">0</span>][<span class="st">'dropoff_latitude'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>0.0    444
Name: dropoff_latitude, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the 0 values of dropoff_longitude</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>rawdf[rawdf[<span class="st">'dropoff_latitude'</span>]<span class="op">==</span><span class="dv">0</span>][<span class="st">'dropoff_longitude'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>0.0    444
Name: dropoff_longitude, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removing negative and 0 values from the dataset</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> rawdf.loc[(rawdf[<span class="st">'fare_amount'</span>]<span class="op">!=</span><span class="dv">0</span>) <span class="op">&amp;</span> (rawdf[<span class="st">'passenger_count'</span>] <span class="op">!=</span> <span class="dv">0</span>) <span class="op">&amp;</span> (rawdf[<span class="st">'trip_distance'</span>] <span class="op">!=</span> <span class="dv">0</span>) <span class="op">&amp;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>(rawdf[<span class="st">'fare_amount'</span>]<span class="op">&gt;</span><span class="dv">0</span>) <span class="op">&amp;</span> (rawdf[<span class="st">'mta_tax'</span>]<span class="op">&gt;</span><span class="dv">0</span>) <span class="op">&amp;</span> (rawdf[<span class="st">'improvement_surcharge'</span>]<span class="op">&gt;</span><span class="dv">0</span>) <span class="op">&amp;</span> (rawdf[<span class="st">'total_amount'</span>]<span class="op">&gt;</span><span class="dv">0</span>) <span class="op">&amp;</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>(rawdf[<span class="st">'pickup_longitude'</span>] <span class="op">!=</span> <span class="dv">0</span>) <span class="op">&amp;</span> (rawdf[<span class="st">'dropoff_longitude'</span>] <span class="op">!=</span> <span class="dv">0</span>)]</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>df.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>(27755, 23)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="dv">28454</span><span class="op">-</span><span class="dv">27755</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>699</code></pre>
</div>
</div>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>df.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Unnamed: 0</th>
      <th>VendorID</th>
      <th>passenger_count</th>
      <th>trip_distance</th>
      <th>pickup_longitude</th>
      <th>pickup_latitude</th>
      <th>RatecodeID</th>
      <th>dropoff_longitude</th>
      <th>dropoff_latitude</th>
      <th>payment_type</th>
      <th>fare_amount</th>
      <th>extra</th>
      <th>mta_tax</th>
      <th>tip_amount</th>
      <th>tolls_amount</th>
      <th>improvement_surcharge</th>
      <th>total_amount</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>27755.0</td>
      <td>27755.000000</td>
      <td>27755.000000</td>
      <td>2.775500e+04</td>
      <td>27755.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>14241.076311</td>
      <td>1.539038</td>
      <td>1.659773</td>
      <td>2.842075</td>
      <td>-73.974167</td>
      <td>40.751104</td>
      <td>1.021366</td>
      <td>-73.973702</td>
      <td>40.752186</td>
      <td>1.328806</td>
      <td>12.193511</td>
      <td>0.330679</td>
      <td>0.5</td>
      <td>1.748339</td>
      <td>0.267612</td>
      <td>3.000000e-01</td>
      <td>15.340142</td>
    </tr>
    <tr>
      <th>std</th>
      <td>8229.713164</td>
      <td>0.498483</td>
      <td>1.314251</td>
      <td>3.436642</td>
      <td>0.036765</td>
      <td>0.027515</td>
      <td>0.170660</td>
      <td>0.033646</td>
      <td>0.031702</td>
      <td>0.483321</td>
      <td>9.645162</td>
      <td>0.433705</td>
      <td>0.0</td>
      <td>2.328050</td>
      <td>1.222312</td>
      <td>5.551215e-17</td>
      <td>11.972937</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.010000</td>
      <td>-74.226357</td>
      <td>40.494244</td>
      <td>1.000000</td>
      <td>-74.300552</td>
      <td>40.524586</td>
      <td>1.000000</td>
      <td>2.500000</td>
      <td>0.000000</td>
      <td>0.5</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>3.000000e-01</td>
      <td>3.300000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>7099.500000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>-73.991852</td>
      <td>40.737461</td>
      <td>1.000000</td>
      <td>-73.991310</td>
      <td>40.736269</td>
      <td>1.000000</td>
      <td>6.500000</td>
      <td>0.000000</td>
      <td>0.5</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>3.000000e-01</td>
      <td>8.300000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>14228.000000</td>
      <td>2.000000</td>
      <td>1.000000</td>
      <td>1.680000</td>
      <td>-73.981873</td>
      <td>40.753925</td>
      <td>1.000000</td>
      <td>-73.979958</td>
      <td>40.754623</td>
      <td>1.000000</td>
      <td>9.000000</td>
      <td>0.000000</td>
      <td>0.5</td>
      <td>1.360000</td>
      <td>0.000000</td>
      <td>3.000000e-01</td>
      <td>11.750000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>21378.500000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>3.100000</td>
      <td>-73.967957</td>
      <td>40.767899</td>
      <td>1.000000</td>
      <td>-73.963520</td>
      <td>40.769653</td>
      <td>2.000000</td>
      <td>14.000000</td>
      <td>0.500000</td>
      <td>0.5</td>
      <td>2.350000</td>
      <td>0.000000</td>
      <td>3.000000e-01</td>
      <td>17.160000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>28453.000000</td>
      <td>2.000000</td>
      <td>6.000000</td>
      <td>37.900000</td>
      <td>-73.552681</td>
      <td>40.879341</td>
      <td>5.000000</td>
      <td>-73.238319</td>
      <td>41.028622</td>
      <td>4.000000</td>
      <td>143.000000</td>
      <td>4.500000</td>
      <td>0.5</td>
      <td>90.200000</td>
      <td>23.580000</td>
      <td>3.000000e-01</td>
      <td>167.380000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="working-with-time-series" class="level3">
<h3 class="anchored" data-anchor-id="working-with-time-series">working with time series</h3>
<p>We have 2 datetime variables that are in ‘object’ format. In order to use them in our data, we need to change them into ‘datetime’ format.</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># changing the tpep_pickup_datetime and tpep_dropoff_datetime into datetime type and creating pickday variable which is the days of the week</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>pickup_dt <span class="op">=</span> pd.to_datetime(df[<span class="st">'tpep_pickup_datetime'</span>])</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>pickup_dt</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>dropoff_dt <span class="op">=</span> pd.to_datetime(df[<span class="st">'tpep_dropoff_datetime'</span>])</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>dropoff_dt</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="co"># dropyear_series = dropoff_dt.dt.year</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="co"># pickyear_series = pickup_dt.dt.year</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co"># df['dropyear'] = dropyear_series</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="co"># df['pickyear'] = pickyear_series</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="co"># dropmonth_series = dropoff_dt.dt.month</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="co"># pickmonth_series = pickup_dt.dt.month</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a><span class="co"># df['dropmonth'] = dropmonth_series</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a><span class="co"># df['pickmonth'] = pickmonth_series</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a><span class="co"># dropday_series = dropoff_dt.dt.day</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a><span class="co"># pickday_series = pickup_dt.dt.day</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a><span class="co"># df['dropday'] = dropday_series</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a><span class="co"># df['pickday'] = pickday_series</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>dropdayname_series <span class="op">=</span> dropoff_dt.dt.day_name()</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>pickdayname_series <span class="op">=</span> pickup_dt.dt.day_name()</span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'pickday'</span>] <span class="op">=</span> pickdayname_series</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a><span class="co"># df['dropday'] = dropdayname_series</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\niloo\AppData\Local\Temp\ipykernel_48864\1875392442.py:25: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  df['pickday'] = pickdayname_series</code></pre>
</div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removing string type variables  </span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop(columns<span class="op">=</span>[<span class="st">'tpep_pickup_datetime'</span>, <span class="st">'tpep_dropoff_datetime'</span>], axis<span class="op">=</span><span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># inserting datetime variables into dataset </span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>df.insert(loc<span class="op">=</span><span class="dv">2</span>, column<span class="op">=</span><span class="st">'tpep_pickup_datetime'</span>, value <span class="op">=</span> pickup_dt)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>df.insert(loc<span class="op">=</span><span class="dv">3</span>, column<span class="op">=</span><span class="st">'tpep_dropoff_datetime'</span>, value <span class="op">=</span> dropoff_dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creating-a-new-variable-duration" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-new-variable-duration">Creating a new variable, Duration</h3>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a new variable, Duration</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>duration <span class="op">=</span>(df[<span class="st">'tpep_dropoff_datetime'</span>]<span class="op">-</span>df[<span class="st">'tpep_pickup_datetime'</span>]).dt.total_seconds()<span class="op">/</span><span class="dv">60</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>df.insert(loc<span class="op">=</span><span class="dv">4</span>, column<span class="op">=</span><span class="st">'duraion_permin'</span>, value <span class="op">=</span> duration)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 27755 entries, 0 to 28452
Data columns (total 25 columns):
 #   Column                 Non-Null Count  Dtype         
---  ------                 --------------  -----         
 0   Unnamed: 0             27755 non-null  int64         
 1   VendorID               27755 non-null  int64         
 2   tpep_pickup_datetime   27755 non-null  datetime64[ns]
 3   tpep_dropoff_datetime  27755 non-null  datetime64[ns]
 4   duraion_permin         27755 non-null  float64       
 5   passenger_count        27755 non-null  int64         
 6   trip_distance          27755 non-null  float64       
 7   pickup_longitude       27755 non-null  float64       
 8   pickup_latitude        27755 non-null  float64       
 9   RatecodeID             27755 non-null  int64         
 10  store_and_fwd_flag     27755 non-null  object        
 11  dropoff_longitude      27755 non-null  float64       
 12  dropoff_latitude       27755 non-null  float64       
 13  payment_type           27755 non-null  int64         
 14  fare_amount            27755 non-null  float64       
 15  extra                  27755 non-null  float64       
 16  mta_tax                27755 non-null  float64       
 17  tip_amount             27755 non-null  float64       
 18  tolls_amount           27755 non-null  float64       
 19  improvement_surcharge  27755 non-null  float64       
 20  total_amount           27755 non-null  float64       
 21  GoodTip                27755 non-null  bool          
 22  Extra                  27755 non-null  bool          
 23  Cash                   27755 non-null  bool          
 24  pickday                27755 non-null  object        
dtypes: bool(3), datetime64[ns](2), float64(13), int64(5), object(2)
memory usage: 4.9+ MB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Unnamed: 0</th>
      <th>VendorID</th>
      <th>tpep_pickup_datetime</th>
      <th>tpep_dropoff_datetime</th>
      <th>duraion_permin</th>
      <th>passenger_count</th>
      <th>trip_distance</th>
      <th>pickup_longitude</th>
      <th>pickup_latitude</th>
      <th>RatecodeID</th>
      <th>...</th>
      <th>extra</th>
      <th>mta_tax</th>
      <th>tip_amount</th>
      <th>tolls_amount</th>
      <th>improvement_surcharge</th>
      <th>total_amount</th>
      <th>GoodTip</th>
      <th>Extra</th>
      <th>Cash</th>
      <th>pickday</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>2016-02-19 20:50:15</td>
      <td>2016-02-19 21:10:20</td>
      <td>20.083333</td>
      <td>1</td>
      <td>11.20</td>
      <td>-73.864700</td>
      <td>40.770416</td>
      <td>1</td>
      <td>...</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>9.80</td>
      <td>5.54</td>
      <td>0.3</td>
      <td>49.14</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>Friday</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>2</td>
      <td>2016-02-19 20:50:53</td>
      <td>2016-02-19 21:09:33</td>
      <td>18.666667</td>
      <td>3</td>
      <td>6.38</td>
      <td>-74.007317</td>
      <td>40.727219</td>
      <td>1</td>
      <td>...</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>4.56</td>
      <td>0.00</td>
      <td>0.3</td>
      <td>27.36</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>Friday</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>2016-02-19 20:51:08</td>
      <td>2016-02-19 20:54:39</td>
      <td>3.516667</td>
      <td>1</td>
      <td>0.60</td>
      <td>-73.980736</td>
      <td>40.765663</td>
      <td>1</td>
      <td>...</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>1.15</td>
      <td>0.00</td>
      <td>0.3</td>
      <td>6.95</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>Friday</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>2</td>
      <td>2016-02-19 20:51:39</td>
      <td>2016-02-19 21:04:08</td>
      <td>12.483333</td>
      <td>5</td>
      <td>2.83</td>
      <td>-73.980087</td>
      <td>40.764450</td>
      <td>1</td>
      <td>...</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>2.66</td>
      <td>0.00</td>
      <td>0.3</td>
      <td>15.96</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>Friday</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>2</td>
      <td>2016-02-19 20:52:21</td>
      <td>2016-02-19 21:01:07</td>
      <td>8.766667</td>
      <td>1</td>
      <td>2.48</td>
      <td>-73.986664</td>
      <td>40.766796</td>
      <td>1</td>
      <td>...</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>2.16</td>
      <td>0.00</td>
      <td>0.3</td>
      <td>12.96</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>Friday</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 25 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'duraion_permin'</span>].describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>count    27755.000000
mean        14.902207
std         50.207117
min          0.000000
25%          6.400000
50%         10.616667
75%         17.050000
max       1438.666667
Name: duraion_permin, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking if observations with 0 duraion had fare amount or not</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'duraion_permin'</span>]<span class="op">==</span><span class="dv">0</span>][<span class="st">'fare_amount'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>6.5     1
52.0    1
Name: fare_amount, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removing observations with 0 value of duraion_permin</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.loc[df[<span class="st">'duraion_permin'</span>]<span class="op">!=</span><span class="dv">0</span>]</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>df.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>(27753, 25)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">'fare_amount'</span>]<span class="op">&lt;</span><span class="fl">2.5</span>][<span class="st">'fare_amount'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>Series([], Name: fare_amount, dtype: int64)</code></pre>
</div>
</div>
</section>
</section>
<section id="changing-the-variable-type" class="level2">
<h2 class="anchored" data-anchor-id="changing-the-variable-type">Changing the variable type</h2>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'store_and_fwd_flag'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>array(['N', 'Y'], dtype=object)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># encoding the variable type into integer</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> LabelEncoder</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>lencoder<span class="op">=</span> LabelEncoder()</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>myencode<span class="op">=</span> lencoder.fit_transform(df[<span class="st">'store_and_fwd_flag'</span>])</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="co"># replacing with previous columns</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>df.drop(<span class="st">'store_and_fwd_flag'</span>, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'store_and_fwd_flag'</span>] <span class="op">=</span> myencode</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># df['store_and_fwd_flag']= df['store_and_fwd_flag'].replace({'N':0 , 'Y':1})</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># encoding the variable type into integer</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> LabelEncoder</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>lencoder<span class="op">=</span> LabelEncoder()</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>myencode<span class="op">=</span> lencoder.fit_transform(df[<span class="st">'pickday'</span>])</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="co"># replacing with previous columns</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>df.drop(<span class="st">"pickday"</span>, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'pickday'</span>] <span class="op">=</span> myencode</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 27753 entries, 0 to 28452
Data columns (total 25 columns):
 #   Column                 Non-Null Count  Dtype         
---  ------                 --------------  -----         
 0   Unnamed: 0             27753 non-null  int64         
 1   VendorID               27753 non-null  int64         
 2   tpep_pickup_datetime   27753 non-null  datetime64[ns]
 3   tpep_dropoff_datetime  27753 non-null  datetime64[ns]
 4   duraion_permin         27753 non-null  float64       
 5   passenger_count        27753 non-null  int64         
 6   trip_distance          27753 non-null  float64       
 7   pickup_longitude       27753 non-null  float64       
 8   pickup_latitude        27753 non-null  float64       
 9   RatecodeID             27753 non-null  int64         
 10  dropoff_longitude      27753 non-null  float64       
 11  dropoff_latitude       27753 non-null  float64       
 12  payment_type           27753 non-null  int64         
 13  fare_amount            27753 non-null  float64       
 14  extra                  27753 non-null  float64       
 15  mta_tax                27753 non-null  float64       
 16  tip_amount             27753 non-null  float64       
 17  tolls_amount           27753 non-null  float64       
 18  improvement_surcharge  27753 non-null  float64       
 19  total_amount           27753 non-null  float64       
 20  GoodTip                27753 non-null  bool          
 21  Extra                  27753 non-null  bool          
 22  Cash                   27753 non-null  bool          
 23  store_and_fwd_flag     27753 non-null  int32         
 24  pickday                27753 non-null  int32         
dtypes: bool(3), datetime64[ns](2), float64(13), int32(2), int64(5)
memory usage: 4.7 MB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>df.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Unnamed: 0</th>
      <th>VendorID</th>
      <th>duraion_permin</th>
      <th>passenger_count</th>
      <th>trip_distance</th>
      <th>pickup_longitude</th>
      <th>pickup_latitude</th>
      <th>RatecodeID</th>
      <th>dropoff_longitude</th>
      <th>dropoff_latitude</th>
      <th>payment_type</th>
      <th>fare_amount</th>
      <th>extra</th>
      <th>mta_tax</th>
      <th>tip_amount</th>
      <th>tolls_amount</th>
      <th>improvement_surcharge</th>
      <th>total_amount</th>
      <th>store_and_fwd_flag</th>
      <th>pickday</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.0</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>2.775300e+04</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
      <td>27753.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>14241.442403</td>
      <td>1.539041</td>
      <td>14.903281</td>
      <td>1.659640</td>
      <td>2.841651</td>
      <td>-73.974166</td>
      <td>40.751105</td>
      <td>1.021331</td>
      <td>-73.973709</td>
      <td>40.752190</td>
      <td>1.328793</td>
      <td>12.192282</td>
      <td>0.330685</td>
      <td>0.5</td>
      <td>1.748045</td>
      <td>0.267432</td>
      <td>3.000000e-01</td>
      <td>15.338443</td>
      <td>0.005261</td>
      <td>2.907578</td>
    </tr>
    <tr>
      <th>std</th>
      <td>8229.773296</td>
      <td>0.498482</td>
      <td>50.208767</td>
      <td>1.314034</td>
      <td>3.435709</td>
      <td>0.036766</td>
      <td>0.027516</td>
      <td>0.170565</td>
      <td>0.033628</td>
      <td>0.031696</td>
      <td>0.483318</td>
      <td>9.642489</td>
      <td>0.433715</td>
      <td>0.0</td>
      <td>2.327348</td>
      <td>1.221945</td>
      <td>5.551215e-17</td>
      <td>11.968784</td>
      <td>0.072341</td>
      <td>2.002628</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.033333</td>
      <td>1.000000</td>
      <td>0.010000</td>
      <td>-74.226357</td>
      <td>40.494244</td>
      <td>1.000000</td>
      <td>-74.300552</td>
      <td>40.524586</td>
      <td>1.000000</td>
      <td>2.500000</td>
      <td>0.000000</td>
      <td>0.5</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>3.000000e-01</td>
      <td>3.300000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>7100.000000</td>
      <td>1.000000</td>
      <td>6.400000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>-73.991852</td>
      <td>40.737461</td>
      <td>1.000000</td>
      <td>-73.991310</td>
      <td>40.736275</td>
      <td>1.000000</td>
      <td>6.500000</td>
      <td>0.000000</td>
      <td>0.5</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>3.000000e-01</td>
      <td>8.300000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>14228.000000</td>
      <td>2.000000</td>
      <td>10.616667</td>
      <td>1.000000</td>
      <td>1.680000</td>
      <td>-73.981873</td>
      <td>40.753929</td>
      <td>1.000000</td>
      <td>-73.979958</td>
      <td>40.754635</td>
      <td>1.000000</td>
      <td>9.000000</td>
      <td>0.000000</td>
      <td>0.5</td>
      <td>1.360000</td>
      <td>0.000000</td>
      <td>3.000000e-01</td>
      <td>11.750000</td>
      <td>0.000000</td>
      <td>3.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>21379.000000</td>
      <td>2.000000</td>
      <td>17.050000</td>
      <td>2.000000</td>
      <td>3.100000</td>
      <td>-73.967957</td>
      <td>40.767899</td>
      <td>1.000000</td>
      <td>-73.963524</td>
      <td>40.769657</td>
      <td>2.000000</td>
      <td>14.000000</td>
      <td>0.500000</td>
      <td>0.5</td>
      <td>2.350000</td>
      <td>0.000000</td>
      <td>3.000000e-01</td>
      <td>17.160000</td>
      <td>0.000000</td>
      <td>5.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>28453.000000</td>
      <td>2.000000</td>
      <td>1438.666667</td>
      <td>6.000000</td>
      <td>37.900000</td>
      <td>-73.552681</td>
      <td>40.879341</td>
      <td>5.000000</td>
      <td>-73.238319</td>
      <td>41.028622</td>
      <td>4.000000</td>
      <td>143.000000</td>
      <td>4.500000</td>
      <td>0.5</td>
      <td>90.200000</td>
      <td>23.580000</td>
      <td>3.000000e-01</td>
      <td>167.380000</td>
      <td>1.000000</td>
      <td>6.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<section id="zero-variance-variables" class="level3">
<h3 class="anchored" data-anchor-id="zero-variance-variables">Zero variance variables</h3>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>df_numeric <span class="op">=</span> df.select_dtypes(include<span class="op">=</span>np.number)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># finding zero variance variables</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_selection <span class="im">import</span> VarianceThreshold</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>selector <span class="op">=</span> VarianceThreshold(threshold<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>selector.fit_transform(df_numeric)</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>selector.get_support(indices<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<pre><code>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 14, 15, 17, 18,
       19], dtype=int64)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>df_numeric.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 27753 entries, 0 to 28452
Data columns (total 20 columns):
 #   Column                 Non-Null Count  Dtype  
---  ------                 --------------  -----  
 0   Unnamed: 0             27753 non-null  int64  
 1   VendorID               27753 non-null  int64  
 2   duraion_permin         27753 non-null  float64
 3   passenger_count        27753 non-null  int64  
 4   trip_distance          27753 non-null  float64
 5   pickup_longitude       27753 non-null  float64
 6   pickup_latitude        27753 non-null  float64
 7   RatecodeID             27753 non-null  int64  
 8   dropoff_longitude      27753 non-null  float64
 9   dropoff_latitude       27753 non-null  float64
 10  payment_type           27753 non-null  int64  
 11  fare_amount            27753 non-null  float64
 12  extra                  27753 non-null  float64
 13  mta_tax                27753 non-null  float64
 14  tip_amount             27753 non-null  float64
 15  tolls_amount           27753 non-null  float64
 16  improvement_surcharge  27753 non-null  float64
 17  total_amount           27753 non-null  float64
 18  store_and_fwd_flag     27753 non-null  int32  
 19  pickday                27753 non-null  int32  
dtypes: float64(13), int32(2), int64(5)
memory usage: 4.2 MB</code></pre>
</div>
</div>
</section>
<section id="dropping-near-to-zero-and-unnecessary-columns" class="level3">
<h3 class="anchored" data-anchor-id="dropping-near-to-zero-and-unnecessary-columns">Dropping near to zero and unnecessary Columns</h3>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dropping columns</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop([<span class="st">'mta_tax'</span>, <span class="st">'improvement_surcharge'</span>, <span class="st">'Unnamed: 0'</span>],axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 'pickup_longitude', 'pickup_latitude', 'dropoff_longitude', 'dropoff_latitude'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>VendorID</th>
      <th>tpep_pickup_datetime</th>
      <th>tpep_dropoff_datetime</th>
      <th>duraion_permin</th>
      <th>passenger_count</th>
      <th>trip_distance</th>
      <th>pickup_longitude</th>
      <th>pickup_latitude</th>
      <th>RatecodeID</th>
      <th>dropoff_longitude</th>
      <th>...</th>
      <th>fare_amount</th>
      <th>extra</th>
      <th>tip_amount</th>
      <th>tolls_amount</th>
      <th>total_amount</th>
      <th>GoodTip</th>
      <th>Extra</th>
      <th>Cash</th>
      <th>store_and_fwd_flag</th>
      <th>pickday</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>2016-02-19 20:50:15</td>
      <td>2016-02-19 21:10:20</td>
      <td>20.083333</td>
      <td>1</td>
      <td>11.20</td>
      <td>-73.864700</td>
      <td>40.770416</td>
      <td>1</td>
      <td>-73.924011</td>
      <td>...</td>
      <td>32.5</td>
      <td>0.5</td>
      <td>9.80</td>
      <td>5.54</td>
      <td>49.14</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>2016-02-19 20:50:53</td>
      <td>2016-02-19 21:09:33</td>
      <td>18.666667</td>
      <td>3</td>
      <td>6.38</td>
      <td>-74.007317</td>
      <td>40.727219</td>
      <td>1</td>
      <td>-73.967018</td>
      <td>...</td>
      <td>21.5</td>
      <td>0.5</td>
      <td>4.56</td>
      <td>0.00</td>
      <td>27.36</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>2016-02-19 20:51:08</td>
      <td>2016-02-19 20:54:39</td>
      <td>3.516667</td>
      <td>1</td>
      <td>0.60</td>
      <td>-73.980736</td>
      <td>40.765663</td>
      <td>1</td>
      <td>-73.988274</td>
      <td>...</td>
      <td>4.5</td>
      <td>0.5</td>
      <td>1.15</td>
      <td>0.00</td>
      <td>6.95</td>
      <td>False</td>
      <td>True</td>
      <td>False</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>2016-02-19 20:51:39</td>
      <td>2016-02-19 21:04:08</td>
      <td>12.483333</td>
      <td>5</td>
      <td>2.83</td>
      <td>-73.980087</td>
      <td>40.764450</td>
      <td>1</td>
      <td>-73.967499</td>
      <td>...</td>
      <td>12.0</td>
      <td>0.5</td>
      <td>2.66</td>
      <td>0.00</td>
      <td>15.96</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2</td>
      <td>2016-02-19 20:52:21</td>
      <td>2016-02-19 21:01:07</td>
      <td>8.766667</td>
      <td>1</td>
      <td>2.48</td>
      <td>-73.986664</td>
      <td>40.766796</td>
      <td>1</td>
      <td>-73.972946</td>
      <td>...</td>
      <td>9.5</td>
      <td>0.5</td>
      <td>2.16</td>
      <td>0.00</td>
      <td>12.96</td>
      <td>True</td>
      <td>True</td>
      <td>False</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 22 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>df.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>(27753, 22)</code></pre>
</div>
</div>
</section>
</section>
<section id="checking-the-linear-correlation-of-variables" class="level2">
<h2 class="anchored" data-anchor-id="checking-the-linear-correlation-of-variables">Checking the linear correlation of variables</h2>
<div class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the linear correlation of variables</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="op">=</span> df.corr()</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>corr_matrix[<span class="st">'Extra'</span>].sort_values(ascending <span class="op">=</span> <span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<pre><code>Extra                 1.000000
extra                 0.788995
GoodTip               0.055842
dropoff_longitude     0.033074
tip_amount            0.010252
trip_distance         0.009459
total_amount          0.008006
pickday               0.006360
VendorID             -0.002636
passenger_count      -0.002936
duraion_permin       -0.006169
store_and_fwd_flag   -0.007480
fare_amount          -0.022386
payment_type         -0.032448
Cash                 -0.037907
dropoff_latitude     -0.041754
tolls_amount         -0.044502
pickup_longitude     -0.061198
pickup_latitude      -0.064492
RatecodeID           -0.081118
Name: Extra, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># heatmap of linear correlation</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">15</span>,<span class="dv">10</span>))</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="co"># sns.set(font_scale=1)</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>sns.heatmap(df.corr(), annot<span class="op">=</span><span class="va">True</span>, annot_kws<span class="op">=</span>{<span class="st">"size"</span>: <span class="dv">10</span>}, linewidth<span class="op">=</span><span class="dv">1</span>, linecolor<span class="op">=</span><span class="st">"black"</span>)</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-49-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>float_df <span class="op">=</span> df.select_dtypes(include<span class="op">=</span><span class="st">'float'</span>)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>float_df.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>Index(['duraion_permin', 'trip_distance', 'pickup_longitude',
       'pickup_latitude', 'dropoff_longitude', 'dropoff_latitude',
       'fare_amount', 'extra', 'tip_amount', 'tolls_amount', 'total_amount'],
      dtype='object')</code></pre>
</div>
</div>
</section>
<section id="boxplots-and-histogram-for-continues-variables" class="level1">
<h1>Boxplots and histogram for continues variables</h1>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>plt.hist(np.array(df[<span class="st">'duraion_permin'</span>]) , density<span class="op">=</span><span class="va">True</span> , bins<span class="op">=</span><span class="dv">50</span>, edgecolor<span class="op">=</span><span class="st">'black'</span> ,facecolor<span class="op">=</span><span class="st">'pink'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Value'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span><span class="st">'duraion_permin'</span>, data<span class="op">=</span>df,palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'duraion_permin'</span>)</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-51-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>dur <span class="op">=</span> df.loc[df[<span class="st">'duraion_permin'</span>]<span class="op">&gt;</span><span class="dv">60</span>]</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>dur.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>(144, 22)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>plt.hist(np.array(df[<span class="st">'trip_distance'</span>]) , density<span class="op">=</span><span class="va">True</span> , bins<span class="op">=</span><span class="dv">50</span>, edgecolor<span class="op">=</span><span class="st">'black'</span> ,facecolor<span class="op">=</span><span class="st">'pink'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Value'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span><span class="st">'trip_distance'</span>, data<span class="op">=</span>df,palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'trip_distance'</span>)</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-53-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>dis <span class="op">=</span> df.loc[df[<span class="st">'trip_distance'</span>]<span class="op">&gt;</span><span class="dv">20</span>]</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>dis.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<pre><code>(123, 22)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>plt.hist(np.array(df[<span class="st">'pickup_longitude'</span>]) , density<span class="op">=</span><span class="va">True</span> , bins<span class="op">=</span><span class="dv">20</span>, edgecolor<span class="op">=</span><span class="st">'black'</span> ,facecolor<span class="op">=</span><span class="st">'pink'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Value'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span><span class="st">'pickup_longitude'</span>, data<span class="op">=</span>df,palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'pickup_longitude'</span>)</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-55-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>plt.hist(np.array(df[<span class="st">'pickup_latitude'</span>]) , density<span class="op">=</span><span class="va">True</span> , bins<span class="op">=</span><span class="dv">50</span>, edgecolor<span class="op">=</span><span class="st">'black'</span> ,facecolor<span class="op">=</span><span class="st">'pink'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Value'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span><span class="st">'pickup_latitude'</span>, data<span class="op">=</span>df,palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'pickup_latitude'</span>)</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-56-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>plt.hist(np.array(df[<span class="st">'dropoff_longitude'</span>]) , density<span class="op">=</span><span class="va">True</span> , bins<span class="op">=</span><span class="dv">50</span>, edgecolor<span class="op">=</span><span class="st">'black'</span> ,facecolor<span class="op">=</span><span class="st">'pink'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Value'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span><span class="st">'dropoff_longitude'</span>, data<span class="op">=</span>df,palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'dropoff_longitude'</span>)</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-57-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>plt.hist(np.array(df[<span class="st">'dropoff_latitude'</span>]) , density<span class="op">=</span><span class="va">True</span> , bins<span class="op">=</span><span class="dv">50</span>, edgecolor<span class="op">=</span><span class="st">'black'</span> ,facecolor<span class="op">=</span><span class="st">'pink'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Value'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span><span class="st">'dropoff_latitude'</span>, data<span class="op">=</span>df,palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'dropoff_latitude'</span>)</span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-58-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>plt.hist(np.array(df[<span class="st">'fare_amount'</span>]) , density<span class="op">=</span><span class="va">True</span> , bins<span class="op">=</span><span class="dv">50</span>, edgecolor<span class="op">=</span><span class="st">'black'</span> ,facecolor<span class="op">=</span><span class="st">'pink'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Value'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span><span class="st">'fare_amount'</span>, data<span class="op">=</span>df,palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'fare_amount'</span>)</span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-59-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>fare <span class="op">=</span> df.loc[df[<span class="st">'fare_amount'</span>]<span class="op">&gt;</span><span class="dv">52</span>]</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>fare.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>(90, 22)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>plt.hist(np.array(df[<span class="st">'extra'</span>]) , density<span class="op">=</span><span class="va">True</span> , bins<span class="op">=</span><span class="dv">50</span>, edgecolor<span class="op">=</span><span class="st">'black'</span> ,facecolor<span class="op">=</span><span class="st">'pink'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Value'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span><span class="st">'extra'</span>, data<span class="op">=</span>df ,palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'extra'</span>)</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-61-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>ext <span class="op">=</span> df.loc[df[<span class="st">'extra'</span>]<span class="op">&gt;</span><span class="dv">1</span>]</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>ext.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<pre><code>(85, 22)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>plt.hist(np.array(df[<span class="st">'tip_amount'</span>]) , density<span class="op">=</span><span class="va">True</span> , bins<span class="op">=</span><span class="dv">50</span>, edgecolor<span class="op">=</span><span class="st">'black'</span> ,facecolor<span class="op">=</span><span class="st">'pink'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Value'</span>)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>)</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span><span class="st">'tip_amount'</span>, data<span class="op">=</span>df,palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'tip_amount'</span>)</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-63-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>tip <span class="op">=</span> df.loc[df[<span class="st">'tip_amount'</span>]<span class="op">&gt;</span><span class="dv">15</span>]</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>tip.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<pre><code>(40, 22)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>plt.hist(np.array(df[<span class="st">'tolls_amount'</span>]) , density<span class="op">=</span><span class="va">True</span> , bins<span class="op">=</span><span class="dv">50</span>, edgecolor<span class="op">=</span><span class="st">'black'</span> ,facecolor<span class="op">=</span><span class="st">'pink'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Value'</span>)</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>)</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span><span class="st">'tolls_amount'</span>, data<span class="op">=</span>df,palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'tolls_amount'</span>)</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-65-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>toll <span class="op">=</span> df.loc[df[<span class="st">'tolls_amount'</span>]<span class="op">&gt;</span><span class="fl">5.54</span>]</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>toll.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>(24, 22)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">121</span>)</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>plt.hist(np.array(df[<span class="st">'total_amount'</span>]) , density<span class="op">=</span><span class="va">True</span> , bins<span class="op">=</span><span class="dv">50</span>, edgecolor<span class="op">=</span><span class="st">'black'</span> ,facecolor<span class="op">=</span><span class="st">'pink'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Value'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">122</span>)</span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>sns.boxplot(y <span class="op">=</span><span class="st">'total_amount'</span>, data<span class="op">=</span>df,palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'total_amount'</span>)</span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-67-output-1.png" class="img-fluid"></p>
</div>
</div>
<section id="bar-charts-for-discrete-and-categorical-variables" class="level2">
<h2 class="anchored" data-anchor-id="bar-charts-for-discrete-and-categorical-variables">Bar charts for discrete and categorical variables</h2>
<div class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>int_df <span class="op">=</span> df.select_dtypes(include<span class="op">=</span><span class="st">'integer'</span>)</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>int_df.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<pre><code>Index(['VendorID', 'passenger_count', 'RatecodeID', 'payment_type',
       'store_and_fwd_flag', 'pickday'],
      dtype='object')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>,<span class="dv">5</span>))</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>valuetable <span class="op">=</span> pd.crosstab(df[<span class="st">'VendorID'</span>],df[<span class="st">'Extra'</span>]) <span class="co"># ,normalize='index'</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>valuetable.plot.bar(stacked<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'VendorID / Extra'</span>)</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'VendorID'</span>)</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Extra'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>Text(0, 0.5, 'Extra')</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 500x500 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-69-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'VendorID'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<pre><code>2    14960
1    12793
Name: VendorID, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>,<span class="dv">5</span>))</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>valuetable <span class="op">=</span> pd.crosstab(df[<span class="st">'passenger_count'</span>],df[<span class="st">'Extra'</span>]) <span class="co"># ,normalize='index'</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>valuetable.plot.bar(stacked<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Passenger count / Extra'</span>)</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Passenger count'</span>)</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Extra'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="71">
<pre><code>Text(0, 0.5, 'Extra')</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 500x500 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-71-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'passenger_count'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="72">
<pre><code>1    19751
2     3954
5     1471
3     1136
6      937
4      504
Name: passenger_count, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>,<span class="dv">5</span>))</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>valuetable <span class="op">=</span> pd.crosstab(df[<span class="st">'extra'</span>],df[<span class="st">'Extra'</span>]) <span class="co"># ,normalize='index'</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>valuetable.plot.bar(stacked<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'extra / Extra'</span>)</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'extra'</span>)</span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Extra'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="111">
<pre><code>Text(0, 0.5, 'Extra')</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 500x500 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-73-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(font_scale<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">3</span>, <span class="dv">3</span>))</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>sns.boxplot(x <span class="op">=</span> df[<span class="st">'Extra'</span>], y <span class="op">=</span> df[<span class="st">'extra'</span>], palette<span class="op">=</span><span class="st">"Blues"</span>)</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Extra'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'extra'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Extra / extra box plot'</span>,fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-74-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>,<span class="dv">5</span>))</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>valuetable <span class="op">=</span> pd.crosstab(df[<span class="st">'RatecodeID'</span>],df[<span class="st">'Extra'</span>]) <span class="co"># ,normalize='index'</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>valuetable.plot.bar(stacked<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'RatecodeID / Extra'</span>)</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'RatecodeID'</span>)</span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Extra'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="75">
<pre><code>Text(0, 0.5, 'Extra')</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 500x500 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-75-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'RatecodeID'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="76">
<pre><code>1    27223
2      506
5       14
4       10
Name: RatecodeID, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>paymentlabels <span class="op">=</span> [<span class="st">'Credit card'</span>,<span class="st">'Cash'</span>,<span class="st">'No charge'</span>, <span class="st">'Dispute'</span>]</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>,<span class="dv">5</span>))</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>valuetable <span class="op">=</span> pd.crosstab(df[<span class="st">'payment_type'</span>],df[<span class="st">'Extra'</span>]) <span class="co"># ,normalize='index'</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>valuetable.plot.bar(stacked<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'payment_type / Extra'</span>)</span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'payment_type'</span>)</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Extra'</span>)</span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>plt.xticks(np.arange(<span class="dv">4</span>),paymentlabels)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 500x500 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-77-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'payment_type'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="78">
<pre><code>1    18770
2     8878
3       68
4       37
Name: payment_type, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>Flaglabels <span class="op">=</span> [<span class="st">'No'</span>, <span class="st">'Yes'</span>]</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>,<span class="dv">5</span>))</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>valuetable <span class="op">=</span> pd.crosstab(df[<span class="st">'store_and_fwd_flag'</span>],df[<span class="st">'Extra'</span>]) <span class="co"># ,normalize='index'</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>valuetable.plot.bar(stacked<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'store and forward trip / Extra'</span>)</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'store and forward trip'</span>)</span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Extra'</span>)</span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>plt.xticks(np.arange(<span class="dv">2</span>),Flaglabels)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 500x500 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-79-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'store_and_fwd_flag'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="80">
<pre><code>0    27607
1      146
Name: store_and_fwd_flag, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>Daylabels <span class="op">=</span> [<span class="st">'Monday'</span>, <span class="st">'Tuesday'</span>,<span class="st">'Wednesday'</span>, <span class="st">'Thursday'</span>, <span class="st">'Friday'</span>,<span class="st">'Saturday'</span>, <span class="st">'Sunday'</span>]</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>valuetable <span class="op">=</span> pd.crosstab(df[<span class="st">'pickday'</span>],df[<span class="st">'Extra'</span>]) <span class="co"># check normalize ,normalize='index'</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>valuetable.plot.bar(stacked<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Pickday / Extra'</span>)</span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'pickday'</span>)</span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Extra'</span>)</span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>plt.legend(bbox_to_anchor<span class="op">=</span>(<span class="fl">1.2</span>, <span class="dv">1</span>),loc<span class="op">=</span><span class="st">'upper right'</span>)</span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a>plt.xticks(np.arange(<span class="dv">7</span>),Daylabels)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-81-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'pickday'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="82">
<pre><code>2    4288
1    4283
0    4127
4    3952
6    3862
3    3675
5    3566
Name: pickday, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">5</span>))</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>valuetable <span class="op">=</span> pd.crosstab(df[<span class="st">'Cash'</span>],df[<span class="st">'Extra'</span>]) <span class="co"># check normalize</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>valuetable.plot.bar(stacked<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Cash / Extra'</span>)</span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Cash'</span>)</span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Extra'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="83">
<pre><code>Text(0, 0.5, 'Extra')</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 500x500 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-83-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Cash'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="84">
<pre><code>False    18875
True      8878
Name: Cash, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">5</span>))</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>valuetable <span class="op">=</span> pd.crosstab(df[<span class="st">'GoodTip'</span>],df[<span class="st">'Extra'</span>]) <span class="co"># check normalize</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>valuetable.plot.bar(stacked<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'GoodTip / Extra'</span>)</span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'GoodTip'</span>)</span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Extra'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="85">
<pre><code>Text(0, 0.5, 'Extra')</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 500x500 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-85-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'GoodTip'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="86">
<pre><code>False    16959
True     10794
Name: GoodTip, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if our target variable is imbalanced</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="co"># We don't need resampling</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Extra'</span>].unique()</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Extra'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="87">
<pre><code>False    14351
True     13402
Name: Extra, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="encoding-boolean-variables" class="level2">
<h2 class="anchored" data-anchor-id="encoding-boolean-variables">Encoding Boolean variables</h2>
<div class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encoding Boolean variables</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> LabelEncoder</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>lencoder<span class="op">=</span> LabelEncoder()</span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>myencode<span class="op">=</span> lencoder.fit_transform(df[<span class="st">'Extra'</span>])</span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a><span class="co"># replacing with previous columns</span></span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a>df.drop(<span class="st">'Extra'</span>, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb148-7"><a href="#cb148-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Extra'</span>] <span class="op">=</span> myencode</span>
<span id="cb148-8"><a href="#cb148-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-9"><a href="#cb148-9" aria-hidden="true" tabindex="-1"></a>lencoder<span class="op">=</span> LabelEncoder()</span>
<span id="cb148-10"><a href="#cb148-10" aria-hidden="true" tabindex="-1"></a>myencode<span class="op">=</span> lencoder.fit_transform(df[<span class="st">'Cash'</span>])</span>
<span id="cb148-11"><a href="#cb148-11" aria-hidden="true" tabindex="-1"></a><span class="co"># replacing with previous columns</span></span>
<span id="cb148-12"><a href="#cb148-12" aria-hidden="true" tabindex="-1"></a>df.drop(<span class="st">'Cash'</span>, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb148-13"><a href="#cb148-13" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Cash'</span>] <span class="op">=</span> myencode</span>
<span id="cb148-14"><a href="#cb148-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-15"><a href="#cb148-15" aria-hidden="true" tabindex="-1"></a>lencoder<span class="op">=</span> LabelEncoder()</span>
<span id="cb148-16"><a href="#cb148-16" aria-hidden="true" tabindex="-1"></a>myencode<span class="op">=</span> lencoder.fit_transform(df[<span class="st">'GoodTip'</span>])</span>
<span id="cb148-17"><a href="#cb148-17" aria-hidden="true" tabindex="-1"></a><span class="co"># replacing with previous columns</span></span>
<span id="cb148-18"><a href="#cb148-18" aria-hidden="true" tabindex="-1"></a>df.drop(<span class="st">'GoodTip'</span>, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb148-19"><a href="#cb148-19" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'GoodTip'</span>] <span class="op">=</span> myencode</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="checking-the-impact-of-extra-variable-with-modeling" class="level3">
<h3 class="anchored" data-anchor-id="checking-the-impact-of-extra-variable-with-modeling">Checking the impact of <em>extra</em> variable with modeling</h3>
</section>
<section id="cross-validation-without-removing-extra" class="level3">
<h3 class="anchored" data-anchor-id="cross-validation-without-removing-extra">cross validation without removing extra</h3>
<div class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10 fold cross validation of classification models without removing extra</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LogisticRegression</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.discriminant_analysis <span class="im">import</span> LinearDiscriminantAnalysis</span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier</span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.neighbors <span class="im">import</span> KNeighborsClassifier</span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestClassifier</span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> KFold</span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> cross_val_score</span>
<span id="cb149-9"><a href="#cb149-9" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> df.drop([<span class="st">'Extra'</span>,<span class="st">'tpep_pickup_datetime'</span>,<span class="st">'tpep_dropoff_datetime'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb149-10"><a href="#cb149-10" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">'Extra'</span>]</span>
<span id="cb149-11"><a href="#cb149-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-12"><a href="#cb149-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb149-13"><a href="#cb149-13" aria-hidden="true" tabindex="-1"></a>xtrain, xtest, ytrain, ytest <span class="op">=</span> train_test_split(x, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb149-14"><a href="#cb149-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-15"><a href="#cb149-15" aria-hidden="true" tabindex="-1"></a>kfold <span class="op">=</span> KFold(n_splits<span class="op">=</span><span class="dv">10</span>, shuffle<span class="op">=</span><span class="va">True</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb149-16"><a href="#cb149-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-17"><a href="#cb149-17" aria-hidden="true" tabindex="-1"></a>models <span class="op">=</span> []</span>
<span id="cb149-18"><a href="#cb149-18" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'LR'</span>, LogisticRegression(n_jobs<span class="op">=-</span><span class="dv">1</span>)))</span>
<span id="cb149-19"><a href="#cb149-19" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'LDA'</span>, LinearDiscriminantAnalysis()))</span>
<span id="cb149-20"><a href="#cb149-20" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'KNN'</span>, KNeighborsClassifier()))</span>
<span id="cb149-21"><a href="#cb149-21" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'DTC'</span>, DecisionTreeClassifier()))</span>
<span id="cb149-22"><a href="#cb149-22" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'RFM'</span>, RandomForestClassifier(n_jobs<span class="op">=-</span><span class="dv">1</span>)))</span>
<span id="cb149-23"><a href="#cb149-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-24"><a href="#cb149-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-25"><a href="#cb149-25" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb149-26"><a href="#cb149-26" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> []</span>
<span id="cb149-27"><a href="#cb149-27" aria-hidden="true" tabindex="-1"></a><span class="co"># scoring = 'accuracy' or 'roc_auc' or 'precision'</span></span>
<span id="cb149-28"><a href="#cb149-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name, model <span class="kw">in</span> models:</span>
<span id="cb149-29"><a href="#cb149-29" aria-hidden="true" tabindex="-1"></a>    kfold <span class="op">=</span> KFold(n_splits<span class="op">=</span><span class="dv">10</span>, shuffle<span class="op">=</span><span class="va">True</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb149-30"><a href="#cb149-30" aria-hidden="true" tabindex="-1"></a>    cv_results <span class="op">=</span> cross_val_score(model, xtrain, ytrain, cv<span class="op">=</span>kfold, scoring<span class="op">=</span> <span class="st">'accuracy'</span>)</span>
<span id="cb149-31"><a href="#cb149-31" aria-hidden="true" tabindex="-1"></a>    results.append(cv_results)</span>
<span id="cb149-32"><a href="#cb149-32" aria-hidden="true" tabindex="-1"></a>    names.append(name)</span>
<span id="cb149-33"><a href="#cb149-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb149-34"><a href="#cb149-34" aria-hidden="true" tabindex="-1"></a>    msg <span class="op">=</span> <span class="st">"</span><span class="sc">%s</span><span class="st">: </span><span class="sc">%f</span><span class="st"> (</span><span class="sc">%f</span><span class="st">)"</span> <span class="op">%</span> (name, cv_results.mean(), cv_results.std())</span>
<span id="cb149-35"><a href="#cb149-35" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(msg) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>LR: 1.000000 (0.000000)
LDA: 0.996892 (0.000911)
KNN: 0.831142 (0.008900)
DTC: 1.000000 (0.000000)
RFM: 1.000000 (0.000000)</code></pre>
</div>
</div>
<section id="rfc-with-extra" class="level4">
<h4 class="anchored" data-anchor-id="rfc-with-extra">RFC with extra</h4>
<div class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># RandomForestClassifier without removing extra,  prediction and classification report and score</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> df.drop([<span class="st">'Extra'</span>,<span class="st">'tpep_pickup_datetime'</span>,<span class="st">'tpep_dropoff_datetime'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">'Extra'</span>]</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>xtrain, xtest, ytrain, ytest <span class="op">=</span> train_test_split(x, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> RandomForestClassifier(n_estimators<span class="op">=</span><span class="dv">20</span>, n_jobs<span class="op">=-</span><span class="dv">1</span>)</span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a>model.fit(xtrain,ytrain)</span>
<span id="cb151-9"><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a>ypred <span class="op">=</span> model.predict(xtest)</span>
<span id="cb151-10"><a href="#cb151-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-11"><a href="#cb151-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> confusion_matrix</span>
<span id="cb151-12"><a href="#cb151-12" aria-hidden="true" tabindex="-1"></a>cm <span class="op">=</span> confusion_matrix(ytest, ypred)</span>
<span id="cb151-13"><a href="#cb151-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cm)</span>
<span id="cb151-14"><a href="#cb151-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-15"><a href="#cb151-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report</span>
<span id="cb151-16"><a href="#cb151-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(ytest, ypred))</span>
<span id="cb151-17"><a href="#cb151-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-18"><a href="#cb151-18" aria-hidden="true" tabindex="-1"></a>score <span class="op">=</span> model.score(xtest, ytest)</span>
<span id="cb151-19"><a href="#cb151-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[2902    0]
 [   0 2649]]
              precision    recall  f1-score   support

           0       1.00      1.00      1.00      2902
           1       1.00      1.00      1.00      2649

    accuracy                           1.00      5551
   macro avg       1.00      1.00      1.00      5551
weighted avg       1.00      1.00      1.00      5551

1.0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ROC Curve</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> roc_auc_score</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>auc <span class="op">=</span> roc_auc_score(ytest, ypred)</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>auc</span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> roc_curve</span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>fpr, tpr, thresholds <span class="op">=</span> roc_curve(ytest, ypred)</span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a>fpr</span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a>tpr</span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a>thresholds</span>
<span id="cb153-10"><a href="#cb153-10" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="dv">0</span>, <span class="dv">1</span>], [<span class="dv">0</span>, <span class="dv">1</span>],<span class="st">'--'</span>)</span>
<span id="cb153-11"><a href="#cb153-11" aria-hidden="true" tabindex="-1"></a>plt.plot(fpr, tpr, marker<span class="op">=</span><span class="st">'.'</span>)</span>
<span id="cb153-12"><a href="#cb153-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'ROC-AUC'</span>)</span>
<span id="cb153-13"><a href="#cb153-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'False Positive Rate'</span>)</span>
<span id="cb153-14"><a href="#cb153-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'True Positive Rate'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="91">
<pre><code>Text(0, 0.5, 'True Positive Rate')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-91-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="rfc-without-extra" class="level4">
<h4 class="anchored" data-anchor-id="rfc-without-extra">RFC without extra</h4>
<div class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># RandomForestClassifier with removing extra, prediction and classification report and score</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> df.drop([<span class="st">'extra'</span>,<span class="st">'Extra'</span>,<span class="st">'tpep_pickup_datetime'</span>,<span class="st">'tpep_dropoff_datetime'</span>],axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">'Extra'</span>]</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>xtrain, xtest, ytrain, ytest <span class="op">=</span> train_test_split(x, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> RandomForestClassifier(n_estimators<span class="op">=</span><span class="dv">20</span>, n_jobs<span class="op">=-</span><span class="dv">1</span>)</span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a>model.fit(xtrain,ytrain)</span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a>ypred <span class="op">=</span> model.predict(xtest)</span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-11"><a href="#cb155-11" aria-hidden="true" tabindex="-1"></a>cm <span class="op">=</span> confusion_matrix(ytest, ypred)</span>
<span id="cb155-12"><a href="#cb155-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cm)</span>
<span id="cb155-13"><a href="#cb155-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-14"><a href="#cb155-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(ytest, ypred))</span>
<span id="cb155-15"><a href="#cb155-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-16"><a href="#cb155-16" aria-hidden="true" tabindex="-1"></a>score <span class="op">=</span> model.score(xtest, ytest)</span>
<span id="cb155-17"><a href="#cb155-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[2409  493]
 [ 690 1959]]
              precision    recall  f1-score   support

           0       0.78      0.83      0.80      2902
           1       0.80      0.74      0.77      2649

    accuracy                           0.79      5551
   macro avg       0.79      0.78      0.79      5551
weighted avg       0.79      0.79      0.79      5551

0.7868852459016393</code></pre>
</div>
</div>
<div class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ROC Curve</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>auc <span class="op">=</span> roc_auc_score(ytest, ypred)</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>auc</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>fpr, tpr, thresholds <span class="op">=</span> roc_curve(ytest, ypred)</span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>fpr</span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>tpr</span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a>thresholds</span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="dv">0</span>, <span class="dv">1</span>], [<span class="dv">0</span>, <span class="dv">1</span>],<span class="st">'--'</span>)</span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a>plt.plot(fpr, tpr, marker<span class="op">=</span><span class="st">'.'</span>)</span>
<span id="cb157-10"><a href="#cb157-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'ROC-AUC'</span>)</span>
<span id="cb157-11"><a href="#cb157-11" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'False Positive Rate'</span>)</span>
<span id="cb157-12"><a href="#cb157-12" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'True Positive Rate'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="93">
<pre><code>Text(0, 0.5, 'True Positive Rate')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-93-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>auc <span class="op">=</span> roc_auc_score(ytest, model.predict(xtest))</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>auc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="94">
<pre><code>0.7848207546948915</code></pre>
</div>
</div>
<div class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>df_numeric.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 27753 entries, 0 to 28452
Data columns (total 20 columns):
 #   Column                 Non-Null Count  Dtype  
---  ------                 --------------  -----  
 0   Unnamed: 0             27753 non-null  int64  
 1   VendorID               27753 non-null  int64  
 2   duraion_permin         27753 non-null  float64
 3   passenger_count        27753 non-null  int64  
 4   trip_distance          27753 non-null  float64
 5   pickup_longitude       27753 non-null  float64
 6   pickup_latitude        27753 non-null  float64
 7   RatecodeID             27753 non-null  int64  
 8   dropoff_longitude      27753 non-null  float64
 9   dropoff_latitude       27753 non-null  float64
 10  payment_type           27753 non-null  int64  
 11  fare_amount            27753 non-null  float64
 12  extra                  27753 non-null  float64
 13  mta_tax                27753 non-null  float64
 14  tip_amount             27753 non-null  float64
 15  tolls_amount           27753 non-null  float64
 16  improvement_surcharge  27753 non-null  float64
 17  total_amount           27753 non-null  float64
 18  store_and_fwd_flag     27753 non-null  int32  
 19  pickday                27753 non-null  int32  
dtypes: float64(13), int32(2), int64(5)
memory usage: 4.2 MB</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="choosing-the-model-using-10-fold-cross-validation-based-on-the-accuracy-metric" class="level2">
<h2 class="anchored" data-anchor-id="choosing-the-model-using-10-fold-cross-validation-based-on-the-accuracy-metric">Choosing the model using 10-fold Cross validation, based on the accuracy metric</h2>
<div class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10 fold cross validation of classification models with removing extra</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> df.drop([<span class="st">'Extra'</span>,<span class="st">'extra'</span>,<span class="st">'tpep_pickup_datetime'</span>,<span class="st">'tpep_dropoff_datetime'</span>, <span class="st">'store_and_fwd_flag'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">'Extra'</span>]</span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a>xtrain, xtest, ytrain, ytest <span class="op">=</span> train_test_split(x, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a>kfold <span class="op">=</span> KFold(n_splits<span class="op">=</span><span class="dv">10</span>, shuffle<span class="op">=</span><span class="va">True</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb163-10"><a href="#cb163-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-11"><a href="#cb163-11" aria-hidden="true" tabindex="-1"></a>models <span class="op">=</span> []</span>
<span id="cb163-12"><a href="#cb163-12" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'LR'</span>, LogisticRegression(n_jobs<span class="op">=-</span><span class="dv">1</span>)))</span>
<span id="cb163-13"><a href="#cb163-13" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'LDA'</span>, LinearDiscriminantAnalysis()))</span>
<span id="cb163-14"><a href="#cb163-14" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'KNN'</span>, KNeighborsClassifier()))</span>
<span id="cb163-15"><a href="#cb163-15" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'DTC'</span>, DecisionTreeClassifier()))</span>
<span id="cb163-16"><a href="#cb163-16" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'RFM'</span>, RandomForestClassifier(n_jobs<span class="op">=-</span><span class="dv">1</span>)))</span>
<span id="cb163-17"><a href="#cb163-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-18"><a href="#cb163-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-19"><a href="#cb163-19" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb163-20"><a href="#cb163-20" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> []</span>
<span id="cb163-21"><a href="#cb163-21" aria-hidden="true" tabindex="-1"></a><span class="co"># scoring = 'accuracy' or 'roc_auc' or 'precision'</span></span>
<span id="cb163-22"><a href="#cb163-22" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name, model <span class="kw">in</span> models:</span>
<span id="cb163-23"><a href="#cb163-23" aria-hidden="true" tabindex="-1"></a>    kfold <span class="op">=</span> KFold(n_splits<span class="op">=</span><span class="dv">10</span>, shuffle<span class="op">=</span><span class="va">True</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb163-24"><a href="#cb163-24" aria-hidden="true" tabindex="-1"></a>    cv_results <span class="op">=</span> cross_val_score(model, xtrain, ytrain, cv<span class="op">=</span>kfold, scoring<span class="op">=</span> <span class="st">'accuracy'</span>)</span>
<span id="cb163-25"><a href="#cb163-25" aria-hidden="true" tabindex="-1"></a>    results.append(cv_results)</span>
<span id="cb163-26"><a href="#cb163-26" aria-hidden="true" tabindex="-1"></a>    names.append(name)</span>
<span id="cb163-27"><a href="#cb163-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb163-28"><a href="#cb163-28" aria-hidden="true" tabindex="-1"></a>    msg <span class="op">=</span> <span class="st">"</span><span class="sc">%s</span><span class="st">: </span><span class="sc">%f</span><span class="st"> (</span><span class="sc">%f</span><span class="st">)"</span> <span class="op">%</span> (name, cv_results.mean(), cv_results.std())</span>
<span id="cb163-29"><a href="#cb163-29" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(msg) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>LR: 0.999234 (0.001048)
LDA: 0.996802 (0.000792)
KNN: 0.724124 (0.010515)
DTC: 0.761282 (0.020315)
RFM: 0.809161 (0.006819)</code></pre>
</div>
</div>
</section>
<section id="dropping-columns-and-fitting-the-model" class="level2">
<h2 class="anchored" data-anchor-id="dropping-columns-and-fitting-the-model">Dropping columns and fitting the model</h2>
<div class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># LogisticRegression model without extra</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> df.drop([<span class="st">'Extra'</span>,<span class="st">'extra'</span>,<span class="st">'tpep_dropoff_datetime'</span>,<span class="st">'tpep_pickup_datetime'</span>, <span class="st">'store_and_fwd_flag'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">'Extra'</span>]</span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a>xtrain, xtest, ytrain, ytest <span class="op">=</span> train_test_split(x, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LogisticRegression(solver<span class="op">=</span> <span class="st">'lbfgs'</span>, penalty<span class="op">=</span><span class="st">'l2'</span>, C<span class="op">=</span> <span class="fl">0.3</span>, n_jobs<span class="op">=-</span><span class="dv">1</span>) <span class="co"># C: inverse of regularization, smaller value, stronger regularization</span></span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a>model.fit(xtrain , ytrain)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="97">
<style>#sk-container-id-1 {color: black;background-color: white;}#sk-container-id-1 pre{padding: 0;}#sk-container-id-1 div.sk-toggleable {background-color: white;}#sk-container-id-1 label.sk-toggleable__label {cursor: pointer;display: block;width: 100%;margin-bottom: 0;padding: 0.3em;box-sizing: border-box;text-align: center;}#sk-container-id-1 label.sk-toggleable__label-arrow:before {content: "▸";float: left;margin-right: 0.25em;color: #696969;}#sk-container-id-1 label.sk-toggleable__label-arrow:hover:before {color: black;}#sk-container-id-1 div.sk-estimator:hover label.sk-toggleable__label-arrow:before {color: black;}#sk-container-id-1 div.sk-toggleable__content {max-height: 0;max-width: 0;overflow: hidden;text-align: left;background-color: #f0f8ff;}#sk-container-id-1 div.sk-toggleable__content pre {margin: 0.2em;color: black;border-radius: 0.25em;background-color: #f0f8ff;}#sk-container-id-1 input.sk-toggleable__control:checked~div.sk-toggleable__content {max-height: 200px;max-width: 100%;overflow: auto;}#sk-container-id-1 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {content: "▾";}#sk-container-id-1 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-1 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-1 input.sk-hidden--visually {border: 0;clip: rect(1px 1px 1px 1px);clip: rect(1px, 1px, 1px, 1px);height: 1px;margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;}#sk-container-id-1 div.sk-estimator {font-family: monospace;background-color: #f0f8ff;border: 1px dotted black;border-radius: 0.25em;box-sizing: border-box;margin-bottom: 0.5em;}#sk-container-id-1 div.sk-estimator:hover {background-color: #d4ebff;}#sk-container-id-1 div.sk-parallel-item::after {content: "";width: 100%;border-bottom: 1px solid gray;flex-grow: 1;}#sk-container-id-1 div.sk-label:hover label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-1 div.sk-serial::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: 0;}#sk-container-id-1 div.sk-serial {display: flex;flex-direction: column;align-items: center;background-color: white;padding-right: 0.2em;padding-left: 0.2em;position: relative;}#sk-container-id-1 div.sk-item {position: relative;z-index: 1;}#sk-container-id-1 div.sk-parallel {display: flex;align-items: stretch;justify-content: center;background-color: white;position: relative;}#sk-container-id-1 div.sk-item::before, #sk-container-id-1 div.sk-parallel-item::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: -1;}#sk-container-id-1 div.sk-parallel-item {display: flex;flex-direction: column;z-index: 1;position: relative;background-color: white;}#sk-container-id-1 div.sk-parallel-item:first-child::after {align-self: flex-end;width: 50%;}#sk-container-id-1 div.sk-parallel-item:last-child::after {align-self: flex-start;width: 50%;}#sk-container-id-1 div.sk-parallel-item:only-child::after {width: 0;}#sk-container-id-1 div.sk-dashed-wrapped {border: 1px dashed gray;margin: 0 0.4em 0.5em 0.4em;box-sizing: border-box;padding-bottom: 0.4em;background-color: white;}#sk-container-id-1 div.sk-label label {font-family: monospace;font-weight: bold;display: inline-block;line-height: 1.2em;}#sk-container-id-1 div.sk-label-container {text-align: center;}#sk-container-id-1 div.sk-container {/* jupyter's `normalize.less` sets `[hidden] { display: none; }` but bootstrap.min.css set `[hidden] { display: none !important; }` so we also need the `!important` here to be able to override the default hidden behavior on the sphinx rendered scikit-learn.org. See: https://github.com/scikit-learn/scikit-learn/issues/21755 */display: inline-block !important;position: relative;}#sk-container-id-1 div.sk-text-repr-fallback {display: none;}</style><div id="sk-container-id-1" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>LogisticRegression(C=0.3, n_jobs=-1)</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br>On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden=""><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-1" type="checkbox" checked=""><label for="sk-estimator-id-1" class="sk-toggleable__label sk-toggleable__label-arrow">LogisticRegression</label><div class="sk-toggleable__content"><pre>LogisticRegression(C=0.3, n_jobs=-1)</pre></div></div></div></div></div>
</div>
</div>
<div class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10 fold cross validation on training data</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> KFold, cross_val_score</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>k_folds <span class="op">=</span> KFold(n_splits <span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>scores <span class="op">=</span> cross_val_score(model, xtrain, ytrain, cv <span class="op">=</span>k_folds)</span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Cross Validation Scores: "</span>, scores)</span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Average CV Score: "</span>, scores.mean())</span>
<span id="cb166-9"><a href="#cb166-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Number of CV Scores used in Average: "</span>, <span class="bu">len</span>(scores))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Cross Validation Scores:  [0.99954975 1.         0.99954955 1.         0.99864865 0.99864865
 1.         1.         1.         0.9990991 ]
Average CV Score:  0.9995495698309748
Number of CV Scores used in Average:  10</code></pre>
</div>
</div>
<div class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># LogisticRegression model prediction and classification report and score</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>ypred <span class="op">=</span> model.predict(xtest)</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>cm <span class="op">=</span> confusion_matrix(ytest, ypred)</span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cm)</span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(ytest, ypred))</span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a>score <span class="op">=</span> model.score(xtest, ytest)</span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[2847   55]
 [  69 2580]]
              precision    recall  f1-score   support

           0       0.98      0.98      0.98      2902
           1       0.98      0.97      0.98      2649

    accuracy                           0.98      5551
   macro avg       0.98      0.98      0.98      5551
weighted avg       0.98      0.98      0.98      5551

0.9776616825797154</code></pre>
</div>
</div>
<div class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># LogisticRegression model ROC-AUC</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>auc <span class="op">=</span> roc_auc_score(ytest, ypred)</span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>auc</span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> roc_curve</span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>fpr, tpr, thresholds <span class="op">=</span> roc_curve(ytest, ypred)</span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a>fpr</span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a>tpr</span>
<span id="cb170-8"><a href="#cb170-8" aria-hidden="true" tabindex="-1"></a>thresholds</span>
<span id="cb170-9"><a href="#cb170-9" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="dv">0</span>, <span class="dv">1</span>], [<span class="dv">0</span>, <span class="dv">1</span>], linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb170-10"><a href="#cb170-10" aria-hidden="true" tabindex="-1"></a>plt.plot(fpr, tpr, marker<span class="op">=</span><span class="st">'.'</span>)</span>
<span id="cb170-11"><a href="#cb170-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'ROC-AUC'</span>)</span>
<span id="cb170-12"><a href="#cb170-12" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'False Positive Rate'</span>)</span>
<span id="cb170-13"><a href="#cb170-13" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'True Positive Rate'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="100">
<pre><code>Text(0, 0.5, 'True Positive Rate')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-100-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="101">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># LogisticRegression model auc score</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>auc <span class="op">=</span> roc_auc_score(ytest, model.predict(xtest))</span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>auc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="101">
<pre><code>0.9774999941462638</code></pre>
</div>
</div>
<div class="cell" data-execution_count="102">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co"># LogisticRegression model coefficient</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>coefficients <span class="op">=</span> pd.concat([pd.DataFrame(x.columns),pd.DataFrame(np.transpose(model.coef_))], axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>column_name<span class="op">=</span> [<span class="st">'Dependent Variable'</span>,<span class="st">'Coefficient'</span>]</span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>coefficients.columns <span class="op">=</span> column_name</span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a>new_row <span class="op">=</span> {<span class="st">'Dependent Variable'</span>:<span class="st">'Intercept'</span>, <span class="st">'Coefficient'</span>: model.intercept_}</span>
<span id="cb174-6"><a href="#cb174-6" aria-hidden="true" tabindex="-1"></a>coefficients <span class="op">=</span> coefficients.append(new_row, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb174-7"><a href="#cb174-7" aria-hidden="true" tabindex="-1"></a>coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\niloo\AppData\Local\Temp\ipykernel_48864\194191354.py:6: FutureWarning: The frame.append method is deprecated and will be removed from pandas in a future version. Use pandas.concat instead.
  coefficients = coefficients.append(new_row, ignore_index=True)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="102">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Dependent Variable</th>
      <th>Coefficient</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>VendorID</td>
      <td>-0.187343</td>
    </tr>
    <tr>
      <th>1</th>
      <td>duraion_permin</td>
      <td>-0.000361</td>
    </tr>
    <tr>
      <th>2</th>
      <td>passenger_count</td>
      <td>0.049829</td>
    </tr>
    <tr>
      <th>3</th>
      <td>trip_distance</td>
      <td>1.621235</td>
    </tr>
    <tr>
      <th>4</th>
      <td>pickup_longitude</td>
      <td>-0.360051</td>
    </tr>
    <tr>
      <th>5</th>
      <td>pickup_latitude</td>
      <td>-0.280732</td>
    </tr>
    <tr>
      <th>6</th>
      <td>RatecodeID</td>
      <td>-2.03707</td>
    </tr>
    <tr>
      <th>7</th>
      <td>dropoff_longitude</td>
      <td>0.170097</td>
    </tr>
    <tr>
      <th>8</th>
      <td>dropoff_latitude</td>
      <td>-0.258859</td>
    </tr>
    <tr>
      <th>9</th>
      <td>payment_type</td>
      <td>0.325254</td>
    </tr>
    <tr>
      <th>10</th>
      <td>fare_amount</td>
      <td>-11.620426</td>
    </tr>
    <tr>
      <th>11</th>
      <td>tip_amount</td>
      <td>-10.96205</td>
    </tr>
    <tr>
      <th>12</th>
      <td>tolls_amount</td>
      <td>-12.620044</td>
    </tr>
    <tr>
      <th>13</th>
      <td>total_amount</td>
      <td>11.092745</td>
    </tr>
    <tr>
      <th>14</th>
      <td>pickday</td>
      <td>-0.389677</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Cash</td>
      <td>-0.011924</td>
    </tr>
    <tr>
      <th>16</th>
      <td>GoodTip</td>
      <td>1.952415</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Intercept</td>
      <td>[-0.0007476918691101775]</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="testing-the-model-by-reducing-the-number-of-features-regarding-their-coefficient-in-the-first-model." class="level2">
<h2 class="anchored" data-anchor-id="testing-the-model-by-reducing-the-number-of-features-regarding-their-coefficient-in-the-first-model.">Testing the model by reducing the number of features regarding their coefficient in the first model.</h2>
<div class="cell" data-execution_count="103">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># improved LogisticRegression model, classification report and score</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> df.drop([<span class="st">'Extra'</span>,<span class="st">'extra'</span>,<span class="st">'tpep_pickup_datetime'</span>,<span class="st">'tpep_dropoff_datetime'</span>,<span class="st">'store_and_fwd_flag'</span>,</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="st">'RatecodeID'</span>,<span class="st">'pickup_longitude'</span>,<span class="st">'pickup_latitude'</span>,<span class="st">'dropoff_longitude'</span>,<span class="st">'dropoff_latitude'</span>, <span class="st">'VendorID'</span>,</span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a><span class="st">'duraion_permin'</span>, <span class="st">'passenger_count'</span>,<span class="st">'payment_type'</span>,<span class="st">'trip_distance'</span>,<span class="st">'Cash'</span>,<span class="st">'pickday'</span>,<span class="st">'GoodTip'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">'Extra'</span>]</span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a>xtrain, xtest, ytrain, ytest <span class="op">=</span> train_test_split(x, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LogisticRegression(solver<span class="op">=</span> <span class="st">'lbfgs'</span>, penalty<span class="op">=</span><span class="st">'l2'</span>, C<span class="op">=</span> <span class="fl">0.3</span>, n_jobs<span class="op">=-</span><span class="dv">1</span>) <span class="co"># C: inverse of regularization, smaller value, stronger regularization</span></span>
<span id="cb176-10"><a href="#cb176-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-11"><a href="#cb176-11" aria-hidden="true" tabindex="-1"></a>model.fit(xtrain , ytrain)</span>
<span id="cb176-12"><a href="#cb176-12" aria-hidden="true" tabindex="-1"></a>ypred <span class="op">=</span> model.predict(xtest)</span>
<span id="cb176-13"><a href="#cb176-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-14"><a href="#cb176-14" aria-hidden="true" tabindex="-1"></a>cm <span class="op">=</span> confusion_matrix(ytest, ypred)</span>
<span id="cb176-15"><a href="#cb176-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cm)</span>
<span id="cb176-16"><a href="#cb176-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-17"><a href="#cb176-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(ytest, ypred))</span>
<span id="cb176-18"><a href="#cb176-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-19"><a href="#cb176-19" aria-hidden="true" tabindex="-1"></a>score <span class="op">=</span> model.score(xtest, ytest)</span>
<span id="cb176-20"><a href="#cb176-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[2902    0]
 [   0 2649]]
              precision    recall  f1-score   support

           0       1.00      1.00      1.00      2902
           1       1.00      1.00      1.00      2649

    accuracy                           1.00      5551
   macro avg       1.00      1.00      1.00      5551
weighted avg       1.00      1.00      1.00      5551

1.0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># improved LogisticRegression model ROC-AUC</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>auc <span class="op">=</span> roc_auc_score(ytest, ypred)</span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>auc</span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>fpr, tpr, thresholds <span class="op">=</span> roc_curve(ytest, ypred)</span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a>fpr</span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a>tpr</span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a>thresholds</span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="dv">0</span>, <span class="dv">1</span>], [<span class="dv">0</span>, <span class="dv">1</span>], linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb178-10"><a href="#cb178-10" aria-hidden="true" tabindex="-1"></a>plt.plot(fpr, tpr, marker<span class="op">=</span><span class="st">'.'</span>)</span>
<span id="cb178-11"><a href="#cb178-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'ROC-AUC'</span>)</span>
<span id="cb178-12"><a href="#cb178-12" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'False Positive Rate'</span>)</span>
<span id="cb178-13"><a href="#cb178-13" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'True Positive Rate'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="104">
<pre><code>Text(0, 0.5, 'True Positive Rate')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="Niloufar%20Shokri_files/figure-html/cell-104-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>auc <span class="op">=</span> roc_auc_score(ytest, model.predict(xtest))</span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>auc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="105">
<pre><code>1.0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="co"># improved LogisticRegression model coefficient</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>coefficients <span class="op">=</span> pd.concat([pd.DataFrame(x.columns),pd.DataFrame(np.transpose(model.coef_))], axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a>column_name<span class="op">=</span> [<span class="st">'Dependent Variable'</span>,<span class="st">'Coefficient'</span>]</span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a>coefficients.columns <span class="op">=</span> column_name</span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a>new_row <span class="op">=</span> {<span class="st">'Dependent Variable'</span>:<span class="st">'Intercept'</span>, <span class="st">'Coefficient'</span>: model.intercept_}</span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true" tabindex="-1"></a>coefficients <span class="op">=</span> coefficients.append(new_row, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb182-7"><a href="#cb182-7" aria-hidden="true" tabindex="-1"></a>coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\niloo\AppData\Local\Temp\ipykernel_48864\3694288901.py:6: FutureWarning: The frame.append method is deprecated and will be removed from pandas in a future version. Use pandas.concat instead.
  coefficients = coefficients.append(new_row, ignore_index=True)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="106">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Dependent Variable</th>
      <th>Coefficient</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>fare_amount</td>
      <td>-12.948226</td>
    </tr>
    <tr>
      <th>1</th>
      <td>tip_amount</td>
      <td>-12.915728</td>
    </tr>
    <tr>
      <th>2</th>
      <td>tolls_amount</td>
      <td>-12.940069</td>
    </tr>
    <tr>
      <th>3</th>
      <td>total_amount</td>
      <td>12.942052</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Intercept</td>
      <td>[-13.797178779536498]</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="110">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10 fold cross validation of classification models after improvment</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> df.drop([<span class="st">'Extra'</span>,<span class="st">'extra'</span>,<span class="st">'tpep_pickup_datetime'</span>,<span class="st">'tpep_dropoff_datetime'</span>,<span class="st">'store_and_fwd_flag'</span>,</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a><span class="st">'RatecodeID'</span>,<span class="st">'pickup_longitude'</span>,<span class="st">'pickup_latitude'</span>,<span class="st">'dropoff_longitude'</span>,<span class="st">'dropoff_latitude'</span>, <span class="st">'VendorID'</span>,</span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a><span class="st">'duraion_permin'</span>, <span class="st">'passenger_count'</span>,<span class="st">'payment_type'</span>,<span class="st">'trip_distance'</span>,<span class="st">'Cash'</span>,<span class="st">'pickday'</span>,<span class="st">'GoodTip'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">'Extra'</span>]</span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-8"><a href="#cb184-8" aria-hidden="true" tabindex="-1"></a>xtrain, xtest, ytrain, ytest <span class="op">=</span> train_test_split(x, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-10"><a href="#cb184-10" aria-hidden="true" tabindex="-1"></a>kfold <span class="op">=</span> KFold(n_splits<span class="op">=</span><span class="dv">10</span>, shuffle<span class="op">=</span><span class="va">True</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb184-11"><a href="#cb184-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-12"><a href="#cb184-12" aria-hidden="true" tabindex="-1"></a>models <span class="op">=</span> []</span>
<span id="cb184-13"><a href="#cb184-13" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'LR'</span>, LogisticRegression(n_jobs<span class="op">=-</span><span class="dv">1</span>)))</span>
<span id="cb184-14"><a href="#cb184-14" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'LDA'</span>, LinearDiscriminantAnalysis()))</span>
<span id="cb184-15"><a href="#cb184-15" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'KNN'</span>, KNeighborsClassifier()))</span>
<span id="cb184-16"><a href="#cb184-16" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'DTC'</span>, DecisionTreeClassifier()))</span>
<span id="cb184-17"><a href="#cb184-17" aria-hidden="true" tabindex="-1"></a>models.append((<span class="st">'RFM'</span>, RandomForestClassifier(n_jobs<span class="op">=-</span><span class="dv">1</span>)))</span>
<span id="cb184-18"><a href="#cb184-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-19"><a href="#cb184-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-20"><a href="#cb184-20" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb184-21"><a href="#cb184-21" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> []</span>
<span id="cb184-22"><a href="#cb184-22" aria-hidden="true" tabindex="-1"></a><span class="co"># scoring = 'accuracy' or 'roc_auc' or 'precision'</span></span>
<span id="cb184-23"><a href="#cb184-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name, model <span class="kw">in</span> models:</span>
<span id="cb184-24"><a href="#cb184-24" aria-hidden="true" tabindex="-1"></a>    kfold <span class="op">=</span> KFold(n_splits<span class="op">=</span><span class="dv">10</span>, shuffle<span class="op">=</span><span class="va">True</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb184-25"><a href="#cb184-25" aria-hidden="true" tabindex="-1"></a>    cv_results <span class="op">=</span> cross_val_score(model, xtrain, ytrain, cv<span class="op">=</span>kfold, scoring<span class="op">=</span> <span class="st">'accuracy'</span>)</span>
<span id="cb184-26"><a href="#cb184-26" aria-hidden="true" tabindex="-1"></a>    results.append(cv_results)</span>
<span id="cb184-27"><a href="#cb184-27" aria-hidden="true" tabindex="-1"></a>    names.append(name)</span>
<span id="cb184-28"><a href="#cb184-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb184-29"><a href="#cb184-29" aria-hidden="true" tabindex="-1"></a>    msg <span class="op">=</span> <span class="st">"</span><span class="sc">%s</span><span class="st">: </span><span class="sc">%f</span><span class="st"> (</span><span class="sc">%f</span><span class="st">)"</span> <span class="op">%</span> (name, cv_results.mean(), cv_results.std())</span>
<span id="cb184-30"><a href="#cb184-30" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(msg) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>LR: 1.000000 (0.000000)
LDA: 0.989731 (0.001504)
KNN: 0.961355 (0.004084)
DTC: 0.970183 (0.003239)
RFM: 0.970769 (0.001652)</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>